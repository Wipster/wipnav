/**
 * Wipnav - jQuery Plugin
 * Responsive Navigation
 *
 * Copyright (c) 2013 Florian Fassing
 * 
 * @author Florian Fassing
 * @version 0.1.5 (10.09.13)
 * 
 * Requires: jQuery v1.4.3+
 *
 * Licensed under Creative Commons Attribution-NonCommercial 3.0:
 *   http://creativecommons.org/licenses/by-nc/3.0/legalcode
 */
var ns="wipnav";(function(b){var a={init:function(c){var d=b.extend({sufi:false,sufiSettings:null,type:"accordion",threshold:980,navButton:null,navAnim:{height:"toggle"},colClass:"collapsed",expClass:"expanded"},c);return this.each(function(){var f=b(this),e=f.data(ns);if(d.sufi&&d.sufiSettings==null){console.warn("Wipnav: Superfish settings are required in order to restart the Superfish Navigation on window resize. "+d.sufiSettings+" is given!")}else{if(!e){f.data(ns,{mobNavAct:false,navWidth:0,settings:d});e=f.data(ns);b(window).bind("resize."+ns,function(g){if(b(window).width()<=d.threshold){e.navWidth=b(this).outerWidth(true);if(e.mobNavAct===false){b(d.navButton).show();if(d.sufi===true){a.killSF.apply(f)}e.mobNavAct=a.initMobNav.call(f)}}else{if(e.mobNavAct===true){b(d.navButton).hide();e.mobNavAct=a.killMobNav.call(f);if(d.sufi===true){a.initSF.apply(f)}}}});b(window).trigger("resize")}else{console.warn("Wipnav: Plugin has already been initialized!")}}})},initSF:function(){var d=b(this),c=d.data(ns);d.superfish(c.settings.sufiSettings)},killSF:function(){var d=b(this),c=d.data(ns);d.superfish("destroy")},initMobNav:function(){var i=b(this),h=i.data(ns),g=h.settings.colClass,f=h.settings.expClass,d=g+" "+f;if(!(b(h.settings.navButton)==null)){i.hide();var c=b(h.settings.navButton);var e=false;c.removeClass(f).addClass(g);c.bind("click."+ns,function(){if(c.hasClass(g)){c.toggleClass(d)}i.animate(h.settings.navAnim,function(){if(c.hasClass(f)&&e){c.toggleClass(d)}e=!e})})}i.find("li").has("ul").addClass("hasSub "+g).find("a:first-child:first, span:first-child:first").bind("click."+ns,function(k){k.preventDefault();var j=b(this);if(h.settings.type==="accordion"){i.find("li."+f).not(b(this).parents("li.hasSub")).toggleClass(d).find("ul:first").slideUp();j.parents("li.hasSub").toggleClass(d);j.siblings("ul").slideToggle()}else{if(h.settings.type==="slider"){if(j.parents("li.hasSub").hasClass(g)){j.parents("ul:first").css({position:"relative",left:"auto"}).animate({right:h.navWidth*-1},function(){j.parents("li.hasSub").siblings("li").hide();j.parents("ul:first").css({right:"auto",left:h.navWidth*-1}).add(j.siblings("ul").show()).animate({left:0})});j.parents("li.hasSub").toggleClass(d)}else{j.parents("ul:first").animate({left:h.navWidth*-1},function(){j.siblings("ul").hide();j.parents("li.hasSub").siblings("li").show();j.parents("ul:first").css({right:h.navWidth*-1,left:"auto"}).animate({right:0})});j.parents("li.hasSub").toggleClass(d)}}}});return true},killMobNav:function(){var f=b(this),e=f.data(ns),d=e.settings.colClass,c=e.settings.expClass;if(!(b(e.settings.navButton)==null)){f.show();b(e.settings.navButton).unbind("click."+ns)}if(e.settings.type==="accordion"){f.find("li").removeClass("hasSub "+d+" "+c).find("a:first-child:first, span:first-child:first").unbind("."+ns)}if(e.settings.type==="slider"){f.find("li").has("ul").removeClass("hasSub "+d+" "+c).find("a:first-child:first, span:first-child:first").unbind("."+ns)}return false},destroy:function(){return this.each(function(){var d=b(this),c=d.data(ns);b(window).unbind("."+ns);c.wipnav.remove();d.removeData(ns)})}};b.fn.wipnav=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist in jQuery.wipnav")}}}})(jQuery);