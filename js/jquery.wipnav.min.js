/**
 * Wipnav - jQuery Plugin
 * Responsive Navigation
 *
 * Copyright (c) 2013 Florian Fassing
 * 
 * @author Florian Fassing
 * @version 0.1.2 (09.09.13)
 * 
 * Requires: jQuery v1.4.3+
 *
 * Licensed under Creative Commons Attribution-NonCommercial 3.0:
 *   http://creativecommons.org/licenses/by-nc/3.0/legalcode
 */
var ns="wipnav";(function(b){var a={init:function(c){var d=b.extend({sufi:false,sufiSettings:null,type:"accordion",threshold:980,navButton:null,navAnim:{height:"toggle"},colClass:"collapsed",expClass:"expanded"},c);return this.each(function(){var f=b(this),e=f.data(ns);if(d.sufi&&d.sufiSettings==null){console.warn("Wipnav: Superfish settings are required in order to restart the Superfish Navigation on window resize. "+d.sufiSettings+" is given!")}else{if(!e){f.data(ns,{mobNavAct:false,navWidth:0,settings:d});e=f.data(ns);b(window).bind("resize."+ns,function(g){if(b(window).width()<=d.threshold){e.navWidth=b(this).outerWidth(true);if(e.mobNavAct===false){b(d.navButton).show();if(d.sufi===true){a.killSF.apply(f)}e.mobNavAct=a.initMobNav.call(f)}}else{if(e.mobNavAct===true){b(d.navButton).hide();e.mobNavAct=a.killMobNav.call(f);if(d.sufi===true){a.initSF.apply(f)}}}});b(window).trigger("resize")}else{console.warn("Wipnav: Plugin has already been initialized!")}}})},initSF:function(){var d=b(this),c=d.data(ns);d.superfish(c.settings.sufiSettings)},killSF:function(){var d=b(this),c=d.data(ns);d.superfish("destroy")},initMobNav:function(){var h=b(this),g=h.data(ns),f=g.settings.colClass,e=g.settings.expClass,d=f+" "+e;if(!(b(g.settings.navButton)==null)){h.hide();var c=b(g.settings.navButton);c.removeClass(e).addClass(f);c.bind("click."+ns,function(){if(c.hasClass(f)){c.toggleClass(d)}h.animate(g.settings.navAnim,function(){c.toggleClass(d)})})}if(g.settings.type==="accordion"){h.find("li").has("ul").addClass("hasSub "+f).find("a:first-child:first, span:first-child:first").bind("click."+ns,function(i){i.preventDefault();h.find("li."+e).not(b(this).parents("li.hasSub")).toggleClass(d).find("ul:first").slideUp();b(this).parents("li.hasSub").toggleClass(d);b(this).siblings("ul").slideToggle()})}if(g.settings.type==="slider"){h.find("li").has("ul").addClass("hasSub "+f).find("a:first-child:first, span:first-child:first").bind("click."+ns,function(i){i.preventDefault();if(b(this).parents("li.hasSub").hasClass(f)){b(this).siblings("ul").show().css("position","relative").animate({left:0});b(this).parents("li.hasSub").siblings("li").hide();b(this).parents("ul:first").siblings("a, span").hide();b(this).parents("li.hasSub").toggleClass(d)}else{b(this).siblings("ul").animate({left:g.navWidth*-1},function(){b(this).parents("li.hasSub").siblings("li").show();b(this).parents("ul:first").siblings("a, span").show();b(this).css("position","absolute");b(this).parents("li.hasSub").toggleClass(d)})}});h.find(".hasSub > ul").css({position:"absolute",left:g.navWidth*-1});b(window).resize(function(){h.find(".hasSub."+f+" > ul").css("left",g.navWidth*-1)})}return true},killMobNav:function(){var f=b(this),e=f.data(ns),d=e.settings.colClass,c=e.settings.expClass;if(!(b(e.settings.navButton)==null)){f.show();b(e.settings.navButton).unbind("click."+ns)}if(e.settings.type==="accordion"){f.find("li").removeClass("hasSub "+d+" "+c).find("a:first-child:first, span:first-child:first").unbind("."+ns)}if(e.settings.type==="slider"){f.find("li").has("ul").removeClass("hasSub "+d+" "+c).find("a:first-child:first, span:first-child:first").unbind("."+ns)}return false},destroy:function(){return this.each(function(){var d=b(this),c=d.data(ns);b(window).unbind("."+ns);c.wipnav.remove();d.removeData(ns)})}};b.fn.wipnav=function(c){if(a[c]){return a[c].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof c==="object"||!c){return a.init.apply(this,arguments)}else{b.error("Method "+c+" does not exist in jQuery.wipnav")}}}})(jQuery);